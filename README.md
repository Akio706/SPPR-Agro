## Запуск через Docker Compose

Для этого проекта предусмотрена настройка через Docker Compose, что позволяет быстро развернуть все необходимые сервисы: основное приложение, интерфейс NiceGUI и базу данных PostgreSQL.

### Требования и особенности
- Используется Python 3.10 (образ `python:3.10-slim`)
- Все зависимости устанавливаются из `requirements.txt` внутри контейнеров
- Для работы с PostgreSQL переменная окружения `DATABASE_URL` уже настроена в `compose.yaml` для каждого сервиса
- Данные PostgreSQL сохраняются между перезапусками благодаря volume `pgdata`

### Сервисы и порты
- `python-root`: основное приложение (порт 8080)
- `python-nicegui`: интерфейс NiceGUI (порт 8081 на хосте, 8080 внутри контейнера)
- `postgres`: база данных PostgreSQL (порт 5432 внутри сети Docker)

### Переменные окружения
- `DATABASE_URL` — строка подключения к PostgreSQL, уже задана для сервисов в `compose.yaml`:
  ```
  postgresql+psycopg2://postgres:postgres@postgres:5432/postgres
  ```
- Для изменения настроек базы данных отредактируйте переменные `POSTGRES_USER`, `POSTGRES_PASSWORD`, `POSTGRES_DB` в секции `postgres` файла `compose.yaml`

### Инструкция по запуску
1. Убедитесь, что у вас установлен Docker и Docker Compose (или используйте `docker compose`)
2. В корне проекта выполните:
    ```bash
    docker compose up --build
    ```
3. После запуска:
    - Основное приложение будет доступно на [http://localhost:8080](http://localhost:8080)
    - Интерфейс NiceGUI — на [http://localhost:8081](http://localhost:8081)

> **Примечание:**
> - Если требуется использовать собственные переменные окружения, создайте файл `.env` в корне проекта или в папке `niceGUI/` и раскомментируйте соответствующие строки `env_file` в `compose.yaml`.
> - Для работы с внешней базой данных измените значение `DATABASE_URL` в настройках сервисов.

## Запуск через Docker (только PostgreSQL)

1. Убедитесь, что файл map_data.db удалён из проекта (или проигнорирован).
2. Запустите:

```bash
docker-compose up --build
```

3. Приложение будет доступно на [http://localhost:8080](http://localhost:8080)

---

**Внимание:**
- Все данные теперь хранятся в PostgreSQL (контейнер `db`).
- Для локального теста без Docker можно использовать SQLite, но для Docker и продакшена — только PostgreSQL.

---
